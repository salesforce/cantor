
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.6">
    
    
      
        <title>Events - Cantor</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2c0c5eaf.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.7fa14f5b.min.css">
        
          
          
          <meta name="theme-color" content="#ffffff">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="white" data-md-color-accent="white">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#definition" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Cantor" class="md-header__button md-logo" aria-label="Cantor" data-md-component="logo">
      
  <img src="../cantor-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cantor
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Events
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      
    </div>
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/salesforce/cantor/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    salesforce/cantor
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Cantor" class="md-nav__button md-logo" aria-label="Cantor" data-md-component="logo">
      
  <img src="../cantor-logo.png" alt="logo">

    </a>
    Cantor
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/salesforce/cantor/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    salesforce/cantor
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      <label class="md-nav__link" for="__nav_2">
        Overview
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Overview" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Overview
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../motivations/" class="md-nav__link">
        Motivations
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../components/" class="md-nav__link">
        Components
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../namespaces/" class="md-nav__link">
        Namespaces
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Events
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Events
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#definition" class="md-nav__link">
    Definition
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#http-api" class="md-nav__link">
    HTTP API
  </a>
  
    <nav class="md-nav" aria-label="HTTP API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-apievents" class="md-nav__link">
    GET /api/events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-apieventsnamespace" class="md-nav__link">
    GET /api/events/{namespace}
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-apieventsnamespacemetadatametadata" class="md-nav__link">
    GET /api/events/{namespace}/metadata/{metadata}
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-apieventsnamespace" class="md-nav__link">
    POST ​/api​/events​/{namespace}
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#put-apieventsnamespace" class="md-nav__link">
    PUT /api​/events​/{namespace}
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-apieventsnamespace" class="md-nav__link">
    DELETE ​/api​/events​/{namespace}
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-apieventsexpirenamespaceendtimestampmillis" class="md-nav__link">
    DELETE /api​/events​/expire​/{namespace}​/{endTimestampMillis}
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#java-grpc-api" class="md-nav__link">
    Java gRPC API
  </a>
  
    <nav class="md-nav" aria-label="Java gRPC API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#namespaces" class="md-nav__link">
    namespaces()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create" class="md-nav__link">
    create()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#store" class="md-nav__link">
    store()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get" class="md-nav__link">
    get()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metadata" class="md-nav__link">
    metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#drop" class="md-nav__link">
    drop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expire" class="md-nav__link">
    expire()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-case" class="md-nav__link">
    Use Case
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../objects/" class="md-nav__link">
        Objects
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../sets/" class="md-nav__link">
        Sets
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Getting started
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Getting started" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Getting started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../embedded/" class="md-nav__link">
        Embedded
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../license/" class="md-nav__link">
        License
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#definition" class="md-nav__link">
    Definition
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#http-api" class="md-nav__link">
    HTTP API
  </a>
  
    <nav class="md-nav" aria-label="HTTP API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-apievents" class="md-nav__link">
    GET /api/events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-apieventsnamespace" class="md-nav__link">
    GET /api/events/{namespace}
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-apieventsnamespacemetadatametadata" class="md-nav__link">
    GET /api/events/{namespace}/metadata/{metadata}
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-apieventsnamespace" class="md-nav__link">
    POST ​/api​/events​/{namespace}
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#put-apieventsnamespace" class="md-nav__link">
    PUT /api​/events​/{namespace}
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-apieventsnamespace" class="md-nav__link">
    DELETE ​/api​/events​/{namespace}
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-apieventsexpirenamespaceendtimestampmillis" class="md-nav__link">
    DELETE /api​/events​/expire​/{namespace}​/{endTimestampMillis}
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#java-grpc-api" class="md-nav__link">
    Java gRPC API
  </a>
  
    <nav class="md-nav" aria-label="Java gRPC API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#namespaces" class="md-nav__link">
    namespaces()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create" class="md-nav__link">
    create()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#store" class="md-nav__link">
    store()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get" class="md-nav__link">
    get()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metadata" class="md-nav__link">
    metadata()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#drop" class="md-nav__link">
    drop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expire" class="md-nav__link">
    expire()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-case" class="md-nav__link">
    Use Case
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/salesforce/cantor/edit/master/docs/events.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  <h1>Events</h1>
                
                <h2 id="definition">Definition</h2>
<p>Cantor <code>Events</code> are multi-dimensional time-series data points; where each data point has a <em>timestamp</em> (in milliseconds) along with some arbitrary key/value pairs as <em>metadata</em> (where values are strings), some arbitrary key/value pairs as <em>dimensions</em> (where values are doubles), and optionally a byte array <em>payload</em> attached to an event.</p>
<p>An event looks like this:</p>
<pre><code class="language-json">{
    &quot;timestampMillis&quot;: 1616011054775,
    &quot;metadata&quot;: {
        &quot;metadataKey1&quot;: &quot;a&quot;,
        &quot;metadataKey2&quot;: &quot;b&quot;,
        &quot;metadataKey3&quot;: &quot;c&quot;
    },
    &quot;dimensions&quot;: {
        &quot;dimensionsKey1&quot;: 0.1,
        &quot;dimensionsKey2&quot;: 0.2,
        &quot;dimensionsKey3&quot;: 0.3
    },
    &quot;payload&quot;: &quot;QmFzZTY0IGVuY29kZWQ=&quot;
}
</code></pre>
<h2 id="http-api">HTTP API</h2>
<p>To make HTTP calls in local testing environment, use this base URL: <a href="http://localhost:8084">http://localhost:8084</a>.</p>
<p>For convenience, you can use <a href="http://localhost:8084">Cantor Swagger UI</a>, which comes with your local cantor instance, to compose the full custom URL for your API calls. Full URL to each API endpoint's Swagger UI page is linked on each endpoint below. <strong>Remember to spin up your local cantor HTTP server instance before you click on any Swagger UI link on this page.</strong></p>
<p>Most of the <code>Events</code> API endpoints need required and/or optional URL parameters. Required URL parameters are shown as part of endpoint's path, while optional URL parameters, if existed, are given below. Only one endpoint (i.e. <code>POST ​/api​/events​/{namespace}</code>) needs data parameters.</p>
<h3 id="get-apievents"><a href="http://localhost:8084/#/Events%20Resource/getNamespaces_3">GET /api/events</a></h3>
<p>Get all event namespaces.</p>
<p><strong>Sample Code:</strong></p>
<pre><code class="language-bash">curl -X GET &quot;http://localhost:8084/api/events&quot; -H &quot;accept: application/json&quot;
</code></pre>
<h3 id="get-apieventsnamespace"><a href="http://localhost:8084/#/Events%20Resource/getEvents_1">GET /api/events/{namespace}</a></h3>
<p>Get all events under a specific namespace.</p>
<p><strong>Optional URL Paramemter(s):</strong></p>
<ul>
<li>
<p><code>start</code>: <code>integer</code></p>
<p>UNIX Time.</p>
</li>
<li>
<p><code>end</code>: <code>integer</code></p>
<p>UNIX Time.</p>
</li>
<li>
<p><code>metadata_query</code>: <code>string array</code></p>
<p>There are two kinds of metadata query you can use:</p>
<ul>
<li>
<p>exact match, e.g. <code>["host=localhost"]</code> matches only the events whose metadata value for metadata key <code>host</code> is exactly <code>localhost</code></p>
</li>
<li>
<p>regex match using <code>~</code> and <code>*</code>, e.g. <code>["host=~prod-*-example"]</code> matches only the events whose metadata value for metadata key <code>host</code> starts with <code>prod-</code> and ends with <code>-example</code></p>
</li>
</ul>
</li>
<li>
<p><code>dimensions_query</code>: <code>string array</code></p>
<p>You can also use <code>=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;=</code> or <code>&gt;</code> as part of dimensions query, e.g. <code>["cpu&gt;=0.3"]</code> matches only the events whose dimension value for dimension key <code>cpu</code> has a value higher than or equal to <code>0.3</code>. </p>
</li>
<li>
<p><code>include_payloads</code>: <code>boolean</code></p>
<p>Defaulted to <code>false</code>. Responses will include the payload of the events if set to <code>true</code>.</p>
</li>
<li>
<p><code>ascending</code>: <code>boolean</code></p>
<p>Defaulted to <code>true</code>. Events returned will be sorted in ascending order if set to <code>true</code> and vice versa.</p>
</li>
<li>
<p><code>limit</code>: <code>integer</code></p>
<p>Defaulted to <code>0</code>, which puts no limit on the number of events returned. If specified, this parameter limits the maximum number of events returned.</p>
</li>
</ul>
<p><strong>Sample Code:</strong></p>
<p>This mock HTTP call returns a list of events under namespace <code>test-namespace</code> between starting timestamp <code>1616011054000</code> and ending timestamp <code>1616011055000</code>, where alll values for the metadata key <code>host</code> starts with <code>na4-</code> (<code>["host=~na4-*"]</code>) and alll values for the dimension key <code>cpu</code> is larger than or equal to 0.3 (<code>["cpu&gt;=0.3"]</code>).</p>
<pre><code class="language-bash">curl -X GET &quot;http://localhost:8084/api/events/test-namespace?start=1616011054000&amp;end=1616011055000&amp;metadata_query=host%3D~na4-%2A&amp;dimensions_query=cpu%3C%3D0.5&amp;ascending=true&quot; -H &quot;accept: application/json&quot;
</code></pre>
<h3 id="get-apieventsnamespacemetadatametadata"><a href="http://localhost:8084/#/Events%20Resource/getMetadata_1">GET /api/events/{namespace}/metadata/{metadata}</a></h3>
<p>Get all existing metadata values, for an event metadata key, under a specific event namespace.</p>
<p><strong>Optional URL Paramemter(s):</strong></p>
<ul>
<li>
<p><code>start</code>: <code>integer</code></p>
<p>UNIX Time.</p>
</li>
<li>
<p><code>end</code>: <code>integer</code></p>
<p>UNIX Time.API</p>
</li>
<li>
<p><code>metadata_query</code>: <code>string array</code></p>
<p>There are two kinds of metadata query you can use:</p>
<ul>
<li>
<p>exact match, e.g. <code>["host=localhost"]</code> matches only the events whose metadata value for metadata key <code>host</code> is exactly <code>localhost</code></p>
</li>
<li>
<p>regex match using <code>~</code> and <code>*</code>, e.g. <code>["host=~prod-*-example"]</code> matches only the events whose metadata value for metadata key <code>host</code> starts with <code>prod-</code> and ends with <code>-example</code></p>
</li>
</ul>
</li>
<li>
<p><code>dimensions_query</code>: <code>string array</code></p>
<p>You can also use <code>=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;=</code> or <code>&gt;</code> as part of dimensions query, e.g. <code>["cpu&gt;=0.3"]</code> matches only the events whose dimension value for dimension key <code>cpu</code> has a value higher than or equal to <code>0.3</code>. </p>
</li>
</ul>
<p><strong>Sample Code:</strong></p>
<p>This mock HTTP call returns all possible metadata values for the metadata key <code>os</code> under namespace <code>test-namespace</code>, between starting timestamp <code>1616011054000</code> and ending timestamp <code>1616011055000</code>, with the metadata query <code>["host=~*-search"]</code> and dimensions query <code>["mem&lt;0.8"]</code>.</p>
<pre><code class="language-bash">curl -X GET &quot;http://localhost:8084/api/events/test-namespace/metadata/os?start=1616011054000&amp;end=1616011055000&amp;metadata_query=host%3D~%2A-search&amp;dimensions_query=mem%3C0.8&quot; -H &quot;accept: application/json&quot;
</code></pre>
<h3 id="post-apieventsnamespace"><a href="http://localhost:8084/#/Events%20Resource/storeMultipleEvents_1">POST ​/api​/events​/{namespace}</a></h3>
<p>Add event(s) under an event namespace.</p>
<p><strong>Data Paramemter(s):</strong></p>
<p>Include events to be added, e.g.</p>
<pre><code class="language-json">[
    {
        &quot;timestampMillis&quot;: 1616011054774,
        &quot;metadata&quot;: {
            &quot;metadataKey1&quot;: &quot;a&quot;
        },
        &quot;payload&quot;: &quot;QmFzZTY0IGVuY29kZWQ=&quot;
    },
    {
        &quot;timestampMillis&quot;: 1616011054775,
        &quot;dimensions&quot;: {
            &quot;dimensionsKey2&quot;: 0.5
        }
    },
    {
        &quot;timestampMillis&quot;: 1616011054776,
        &quot;metadata&quot;: {
            &quot;metadataKey3&quot;: &quot;a&quot;
        },
        &quot;dimensions&quot;: {
            &quot;dimensionsKey1&quot;: 0.1,
            &quot;dimensionsKey3&quot;: 0.18
        }
    }
]
</code></pre>
<p><strong>Sample Code:</strong></p>
<p>This mock HTTP call stores an event (schema defined right above) under the event namespace <code>test-namespace</code>.</p>
<pre><code class="language-bash">curl -X POST &quot;http://localhost:8084/api/events/test-namespace&quot; -H &quot;accept: */*&quot; -H &quot;Content-Type: application/json&quot; -d &quot;[{\&quot;timestampMillis\&quot;:1616011054774,\&quot;metadata\&quot;:{\&quot;metadataKey1\&quot;:\&quot;a\&quot;},\&quot;payload\&quot;:\&quot;QmFzZTY0IGVuY29kZWQ=\&quot;},{\&quot;timestampMillis\&quot;:1616011054775,\&quot;dimensions\&quot;:{\&quot;dimensionsKey2\&quot;:0.5}},{\&quot;timestampMillis\&quot;:1616011054776,\&quot;metadata\&quot;:{\&quot;metadataKey3\&quot;:\&quot;a\&quot;},\&quot;dimensions\&quot;:{\&quot;dimensionsKey1\&quot;:0.1,\&quot;dimensionsKey3\&quot;:0.18}}]&quot;
</code></pre>
<h3 id="put-apieventsnamespace"><a href="http://localhost:8084/#/Events%20Resource/createNamespace_2">PUT /api​/events​/{namespace}</a></h3>
<p>Create an event namespace.</p>
<p><strong>Sample Code:</strong></p>
<p>This mock HTTP call adds the event namespace <code>test-namespace</code>.</p>
<pre><code class="language-bash">curl -X PUT &quot;http://localhost:8084/api/events/test-namespace&quot; -H &quot;accept: */*&quot;
</code></pre>
<h3 id="delete-apieventsnamespace"><a href="http://localhost:8084/#/Events%20Resource/dropNamespace_2">DELETE ​/api​/events​/{namespace}</a></h3>
<p>Drop an event namespace.</p>
<p><strong>Sample Code:</strong></p>
<p>This mock HTTP call drops the event namespace <code>test-namespace</code>.</p>
<pre><code class="language-bash">curl -X DELETE &quot;http://localhost:8084/api/events/test-namespace&quot; -H &quot;accept: */*&quot;
</code></pre>
<h3 id="delete-apieventsexpirenamespaceendtimestampmillis"><a href="http://localhost:8084/#/Events%20Resource/expire_1">DELETE /api​/events​/expire​/{namespace}​/{endTimestampMillis}</a></h3>
<p>Expire old events under a specific event namespace before the given timestamp.</p>
<p><strong>Sample Code:</strong></p>
<p>This mock HTTP call sets all events under the event namespace <code>test-namespace</code> to expire before UNIX time <code>1616020000</code>, which is March 17, 2021, at 8:43pm in UTC.</p>
<pre><code class="language-bash">curl -X DELETE &quot;http://localhost:8084/api/events/expire/test-namespace/1616020000&quot; -H &quot;accept: */*&quot;
</code></pre>
<h2 id="java-grpc-api">Java gRPC API</h2>
<p>To make use of Cantor's gRPC client in local testing environment, make sure you have a local cantor gRPC server instance running. </p>
<h3 id="namespaces"><strong>namespaces()</strong></h3>
<p>Get all event namespaces.</p>
<p><strong>Method Signature(s):</strong></p>
<ul>
<li><code>Collection&lt;String&gt; namespaces() throws IOException</code></li>
</ul>
<p><strong>Sample Code:</strong></p>
<pre><code class="language-java">import com.salesforce.cantor.grpc.CantorOnGrpc;
import java.io.IOException;
​
class Scratch {
    public static void main(String[] args) throws IOException {
        CantorOnGrpc cantor = new CantorOnGrpc(&quot;localhost:7443&quot;);
        System.out.println(cantor.events().namespace());
    }
}
</code></pre>
<h3 id="create"><strong>create()</strong></h3>
<p>Create an event namespace.</p>
<p><strong>Method Signature(s):</strong></p>
<ul>
<li><code>void create(String namespace) throws IOException</code></li>
</ul>
<p><strong>Sample Code:</strong></p>
<p>This following code creates an event namespace <code>dev-namespace</code>.</p>
<pre><code class="language-java">import com.salesforce.cantor.grpc.CantorOnGrpc;
import java.io.IOException;
​
class Scratch {
    public static void main(String[] args) throws IOException {
        CantorOnGrpc cantor = new CantorOnGrpc(&quot;localhost:7443&quot;);
        cantor.events().create(&quot;dev-namespace&quot;);
    }
}
</code></pre>
<h3 id="store"><strong>store()</strong></h3>
<p>Add event(s) under an event namespace.</p>
<p><strong>Method Signature(s):</strong></p>
<p>For storing a single event:</p>
<ul>
<li>
<p><code>void store(String namespace, Event event) throws IOException</code></p>
</li>
<li>
<p><code>void store(String namespace,
              long timestampMillis,
              Map&lt;String, String&gt; metadata,
              Map&lt;String, Double&gt; dimensions) throws IOException</code></p>
</li>
<li>
<p><code>void store(String namespace,
              long timestampMillis,
              Map&lt;String, String&gt; metadata,
              Map&lt;String, Double&gt; dimensions,
              byte[] payload) throws IOException</code></p>
</li>
</ul>
<p>For storing multiple events:</p>
<ul>
<li><code>void store(String namespace, Collection&lt;Event&gt; batch) throws IOException</code></li>
</ul>
<p><strong>Sample Code:</strong></p>
<p>This following code stores a single event (with metadata, dimensions and payload) under event namespace <code>dev-namespace</code>.</p>
<pre><code class="language-java">import com.salesforce.cantor.grpc.CantorOnGrpc;
import java.io.IOException;
import java.nio.charset.StandardCharsets;
import java.util.Collections;
​
class Scratch {
    public static void main(String[] args) throws IOException {
        CantorOnGrpc cantor = new CantorOnGrpc(&quot;localhost:7443&quot;);
        // remember to create the event namespace first
        cantor.events().store(&quot;dev-namespace&quot;, System.currentTimeMillis(), Collections.singletonMap(&quot;metadataKey1&quot;, &quot;testValue&quot;), Collections.singletonMap(&quot;dimensionsKey2&quot;, 5.9), &quot;Hello!&quot;.getBytes(StandardCharsets.UTF_8));
    }
}
</code></pre>
<h3 id="get">get()</h3>
<p>Get all events under a specific namespace.</p>
<p><strong>Argument(s):</strong></p>
<ul>
<li>
<p><code>startTimestampMillis</code>: Start timestamp in UNIX time.</p>
</li>
<li>
<p><code>endTimestampMillis</code>: End timestamp in UNIX time.</p>
</li>
<li>
<p><code>metadataQuery</code>: There are two kinds of metadata query you can use:</p>
<ul>
<li>
<p>exact match, e.g. <code>Collections.singletonMap("host", "=localhost")</code> matches only the events whose metadata value for metadata key host is exactly localhost</p>
</li>
<li>
<p>regex match using <code>~</code> and <code>*</code>, e.g. <code>Collections.singletonMap("host", "=~prod-*-example")</code> matches only the events whose metadata value for metadata key <code>host</code> starts with <code>prod-</code> and ends with <code>-example</code></p>
</li>
</ul>
</li>
<li>
<p><code>dimensionsQuery</code>: You can also use <code>=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;=</code> or <code>&gt;</code> as part of dimensions query, e.g. a <code>Collections.singletonMap("cpu", &gt;=0.3")</code> matches only the events whose dimension value for dimension key <code>cpu</code> has a value higher than or equal to <code>0.3</code>.</p>
</li>
<li>
<p><code>includePayloads</code>: Defaulted to <code>false</code>. Responses will include the payload of the events if set to <code>true</code>.</p>
</li>
<li>
<p><code>ascending</code>: Defaulted to <code>true</code>. Events returned will be sorted in ascending order if set to <code>true</code> and vice versa.</p>
</li>
<li>
<p><code>limit</code>: Defaulted to <code>0</code>, which puts no limit on the number of events returned. If specified, this parameter limits the maximum number of events returned.</p>
</li>
</ul>
<p><strong>Method Signature(s):</strong></p>
<pre><code class="language-java">List&lt;Event&gt; get(String namespace,
                long startTimestampMillis,
                long endTimestampMillis) throws IOException
</code></pre>
<pre><code class="language-java">List&lt;Event&gt; get(String namespace,
                long startTimestampMillis,
                long endTimestampMillis,
                boolean includePayloads) throws IOException
</code></pre>
<pre><code class="language-java">List&lt;Event&gt; get(String namespace,
                long startTimestampMillis,
                long endTimestampMillis,
                Map&lt;String, String&gt; metadataQuery,
                Map&lt;String, String&gt; dimensionsQuery) throws IOException 
</code></pre>
<pre><code class="language-java">List&lt;Event&gt; get(String namespace,
                long startTimestampMillis,
                long endTimestampMillis,
                Map&lt;String, String&gt; metadataQuery,
                Map&lt;String, String&gt; dimensionsQuery,
                boolean includePayloads) throws IOException
</code></pre>
<pre><code class="language-java">List&lt;Event&gt; get(String namespace,
                long startTimestampMillis,
                long endTimestampMillis,
                Map&lt;String, String&gt; metadataQuery,
                Map&lt;String, String&gt; dimensionsQuery,
                boolean includePayloads,
                boolean ascending,
                int limit) throws IOException
</code></pre>
<p><strong>Sample Code:</strong></p>
<pre><code class="language-java">import com.salesforce.cantor.grpc.CantorOnGrpc;
​import java.io.IOException;

class Scratch {
    public static void main(String[] args) throws IOException {
        CantorOnGrpc cantor = new CantorOnGrpc(&quot;localhost:7443&quot;);
        System.out.println(cantor.events().get(&quot;dev-namespace&quot;, System.currentTimeMillis() - 60000, System.currentTimeMillis(), false));
    }
}
</code></pre>
<h3 id="metadata">metadata()</h3>
<p>Get distinct metadata values for the given metadata key for events in the given namespace, with timestamp between
the <code>startTimestampMillis</code> and <code>endTimestampMillis</code>, metadata and dimensions matching the given queries(<code>metadataQuery</code> and <code>dimensionsQuery</code>).</p>
<p><strong>Method Signature(s):</strong></p>
<pre><code class="language-java">Set&lt;String&gt; metadata(String namespace,
                     String metadataKey,
                     long startTimestampMillis,
                     long endTimestampMillis,
                     Map&lt;String, String&gt; metadataQuery,
                     Map&lt;String, String&gt; dimensionsQuery) throws IOException
</code></pre>
<p><strong>Sample Code:</strong></p>
<pre><code class="language-java">import com.salesforce.cantor.grpc.CantorOnGrpc;
import java.io.IOException;​
import java.util.Collections;

class Scratch {
    public static void main(String[] args) throws IOException {
        CantorOnGrpc cantor = new CantorOnGrpc(&quot;localhost:7443&quot;);
        System.out.println(cantor.events().metadata(&quot;dev-namespace&quot;, 0, System.currentTimeMillis(), Collections.singletonMap(&quot;metadataKey1&quot;, &quot;=~test*&quot;), null));
    }
}
</code></pre>
<h3 id="drop">drop()</h3>
<p>Drop an event namespace.</p>
<p><strong>Method Signature(s):</strong> </p>
<ul>
<li><code>void drop(String namespace) throws IOException</code></li>
</ul>
<p><strong>Sample Code:</strong></p>
<pre><code class="language-java">import com.salesforce.cantor.grpc.CantorOnGrpc;
import java.io.IOException;​

class Scratch {
    public static void main(String[] args) throws IOException {
        CantorOnGrpc cantor = new CantorOnGrpc(&quot;localhost:7443&quot;);
        cantor.events().drop(&quot;dev-namespace&quot;);
    }
}
</code></pre>
<h3 id="expire">expire()</h3>
<p>Expire all events with timestamp before the given end timestamp.</p>
<p><strong>Method Signature(s):</strong> </p>
<ul>
<li><code>void expire(String namespace, long endTimestampMillis)</code></li>
</ul>
<p><strong>Sample Code:</strong></p>
<pre><code class="language-java">import com.salesforce.cantor.grpc.CantorOnGrpc;
import java.io.IOException;​

class Scratch {
    public static void main(String[] args) throws IOException {
        CantorOnGrpc cantor = new CantorOnGrpc(&quot;localhost:7443&quot;);
        cantor.events().expire(&quot;dev-namespace&quot;, 1616031010483);
    }
}
</code></pre>
<h2 id="use-case">Use Case</h2>
<p>Any time-series data fits will as a use case for events. Keep a log of requests to your web-service, with query parameters and headers as metadata. Add response size, request latency,  and number of errors as dimensions. You could even store the response body as a payload. Metadata and dimension keys do not have to be defined beforehand, so new keys can crop up at runtime without needing to change any schema or config.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../namespaces/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Namespaces
            </div>
          </div>
        </a>
      
      
        <a href="../objects/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Objects
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 Salesforce
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.fb4a9340.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.a1c7c35e.min.js"></script>
      
    
  </body>
</html>